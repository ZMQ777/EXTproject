/**
 * @class Ext.dom.Element
 * @alternateClassName Ext.Element
 * @mixins Ext.util.Positionable
 * @mixins Ext.mixin.Observable
 *
 * Encapsulates a DOM element, adding simple DOM manipulation facilities, normalizing for browser differences.
 *
 * **Note:** The events included in this Class are the ones we've found to be the most commonly used. Many events are
 * not listed here due to the expedient rate of change across browsers. For a more comprehensive list, please visit the
 * following resources:
 *
 * + [Mozilla Event Reference Guide](https://developer.mozilla.org/en-US/docs/Web/Events)
 * + [W3 Pointer Events](http://www.w3.org/TR/pointerevents/)
 * + [W3 Touch Events](http://www.w3.org/TR/touch-events/)
 * + [W3 DOM 2 Events](http://www.w3.org/TR/DOM-Level-2-Events/)
 * + [W3 DOM 3 Events](http://www.w3.org/TR/DOM-Level-3-Events/)
 *
 * ## Usage
 *
 *     // by id
 *     var el = Ext.get("my-div");
 *
 *     // by DOM element reference
 *     var el = Ext.get(myDivElement);
 *
 * ## Selecting Descendant Elements
 *
 * Ext.dom.Element instances can be used to select descendant nodes using CSS selectors.
 * There are 3 methods that can be used for this purpose, each with a slightly different
 * twist:
 *
 * - {@link #method-query}
 * - {@link #method-selectNode}
 * - {@link #method-select}
 *
 * These methods can accept any valid CSS selector since they all use
 * [querySelectorAll](http://www.w3.org/TR/css3-selectors/) under the hood. The primary
 * difference between these three methods is their return type:
 *
 * To get an array of HTMLElement instances matching the selector '.foo' use the query
 * method:
 *
 *     element.query('.foo');
 *
 * This can easily be transformed into an array of Ext.dom.Element instances by setting
 * the `asDom` parameter to `false`:
 *
 *     element.query('.foo', false);
 *
 * If the desired result is only the first matching HTMLElement use the selectNode method:
 *
 *     element.selectNode('.foo');
 *
 * Once again, the dom node can be wrapped in an Ext.dom.Element by setting the `asDom`
 * parameter to `false`:
 *
 *     element.selectNode('.foo', false);
 *
 * The `select` method is used when the desired return type is a {@link
 * Ext.CompositeElementLite CompositeElementLite} or a {@link Ext.CompositeElement
 * CompositeElement}.  These are collections of elements that can be operated on as a
 * group using any of the methods of Ext.dom.Element.  The only difference between the two
 * is that CompositeElementLite is a collection of HTMLElement instances, while
 * CompositeElement is a collection of Ext.dom.Element instances.  To retrieve a
 * CompositeElementLite that represents a collection of HTMLElements for selector '.foo':
 *
 *     element.select('.foo');
 *
 * For a {@link Ext.CompositeElement CompositeElement} simply pass `true` as the
 * `composite` parameter:
 *
 *     element.select('.foo', true);
 *
 * The query selection methods can be used even if you don't have a Ext.dom.Element to
 * start with For example to select an array of all HTMLElements in the document that match the
 * selector '.foo', simply wrap the document object in an Ext.dom.Element instance using
 * {@link Ext#fly}:
 *
 *     Ext.fly(document).query('.foo');
 *
 * # Animations
 *
 * When an element is manipulated, by default there is no animation.
 *
 *     var el = Ext.get("my-div");
 *
 *     // no animation
 *     el.setWidth(100);
 *
 * specified as boolean (true) for default animation effects.
 *
 *     // default animation
 *     el.setWidth(100, true);
 *
 * To configure the effects, an object literal with animation options to use as the Element animation configuration
 * object can also be specified. Note that the supported Element animation configuration options are a subset of the
 * {@link Ext.fx.Anim} animation options specific to Fx effects. The supported Element animation configuration options
 * are:
 *
 *     Option    Default   Description
 *     --------- --------  ---------------------------------------------
 *     duration  350       The duration of the animation in milliseconds
 *     easing    easeOut   The easing method
 *     callback  none      A function to execute when the anim completes
 *     scope     this      The scope (this) of the callback function
 *
 * Usage:
 *
 *     // Element animation options object
 *     var opt = {
 *         duration: 1000,
 *         easing: 'elasticIn',
 *         callback: this.foo,
 *         scope: this
 *     };
 *     // animation with some options set
 *     el.setWidth(100, opt);
 *
 * The Element animation object being used for the animation will be set on the options object as "anim", which allows
 * you to stop or manipulate the animation. Here is an example:
 *
 *     // using the "anim" property to get the Anim object
 *     if(opt.anim.isAnimated()){
 *         opt.anim.stop();
 *     }
 */
Ext.define('Ext.dom.Element',function(Element){var WIN=window,DOC=document,docEl=DOC.documentElement,TOP=WIN.top,elementIdCounter,windowId,documentId,WIDTH='width',HEIGHT='height',MIN_WIDTH='min-width',MIN_HEIGHT='min-height',MAX_WIDTH='max-width',MAX_HEIGHT='max-height',TOP='top',RIGHT='right',BOTTOM='bottom',LEFT='left',VISIBILITY='visibility',HIDDEN='hidden',DISPLAY="display",NONE="none",ZINDEX="z-index",POSITION="position",RELATIVE="relative",STATIC="static",SEPARATOR='-',wordsRe=/\w/g,spacesRe=/\s+/,classNameSplitRegex=/[\s]+/,transparentRe=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,adjustDirect2DTableRe=/table-row|table-.*-group/,topRe=/top/i,borders={t:'border-top-width',r:'border-right-width',b:'border-bottom-width',l:'border-left-width'},paddings={t:'padding-top',r:'padding-right',b:'padding-bottom',l:'padding-left'},margins={t:'margin-top',r:'margin-right',b:'margin-bottom',l:'margin-left'},paddingsTLRB=[paddings.l,paddings.r,paddings.t,paddings.b],bordersTLRB=[borders.l,borders.r,borders.t,borders.b],numberRe=/\d+$/,unitRe=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,defaultUnit='px',camelRe=/(-[a-z])/gi,cssRe=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,pxRe=/^\d+(?:\.\d*)?px$/i,propertyCache={},ORIGINALDISPLAY='originalDisplay',camelReplaceFn=function(m,a){return a.charAt(1).toUpperCase()},clearData=function(node,deep){var childNodes,i,len;if(node.nodeType===1){node._extData=null;if(deep){childNodes=node.childNodes;for(i=0,len=childNodes.length;i<len;i+=1){clearData(childNodes[i],deep)}}}},visibilityCls=Ext.baseCSSPrefix+'hidden-visibility',displayCls=Ext.baseCSSPrefix+'hidden-display',offsetsCls=Ext.baseCSSPrefix+'hidden-offsets',clipCls=Ext.baseCSSPrefix+'hidden-clip',sizedCls=Ext.baseCSSPrefix+'sized',unsizedCls=Ext.baseCSSPrefix+'unsized',stretchedCls=Ext.baseCSSPrefix+'stretched',CREATE_ATTRIBUTES={style:'style',className:'className',cls:'cls',classList:'classList',text:'text',hidden:'hidden',html:'html',children:'children'},lastFocusChange=0,lastKeyboardClose=0,editableHasFocus=false,isVirtualKeyboardOpen=false,visFly,scrollFly,caFly;try{elementIdCounter=TOP.__elementIdCounter__}catch(e){TOP=WIN}TOP.__elementIdCounter=elementIdCounter=(TOP.__elementIdCounter__||0)+1;windowId='ext-window-'+elementIdCounter;documentId='ext-document-'+elementIdCounter;return{alternateClassName:['Ext.Element'],mixins:['Ext.util.Positionable','Ext.mixin.Observable'],requires:['Ext.dom.Shadow','Ext.dom.Shim','Ext.dom.ElementEvent','Ext.event.publisher.Dom','Ext.event.publisher.Gesture','Ext.event.publisher.ElementSize','Ext.event.publisher.ElementPaint'],uses:['Ext.dom.Helper','Ext.dom.CompositeElement','Ext.dom.Fly','Ext.dom.TouchAction','Ext.event.publisher.Focus'],observableType:'element',isElement:true,skipGarbageCollection:true,$applyConfigs:true,identifiablePrefix:'ext-element-',styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(dom){var me=this,id;if(typeof dom==='string'){dom=DOC.getElementById(dom)}if(!dom){Ext.raise("Invalid domNode reference or an id of an existing domNode: "+dom);return null}if(Ext.cache[dom.id]){Ext.raise("Element cache already contains an entry for id '"+dom.id+"'.  Use Ext.get() to create or retrieve Element instances.")}me.dom=dom;id=dom.id;if(id){me.id=id}else{id=dom.id=me.getUniqueId()}if(!me.validIdRe.test(me.id)){Ext.raise('Invalid Element "id": "'+me.id+'"')}me.el=me;Ext.cache[id]=me;me.longpressListenerCount=0;me.mixins.observable.constructor.call(me)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:unitRe,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(size,units){if(typeof size==='number'){return size+(units||defaultUnit)}if(size===""||size==="auto"||size==null){return size||''}if(numberRe.test(size)){return size+(units||defaultUnit)}if(!unitRe.test(size)){Ext.Logger.warn("Warning, size detected ("+size+") not a valid property value on Element.addUnits.");return size||''}return size},create:function(attributes,domNode){var me=this,classes,element,elementStyle,tag,value,name,i,ln,tmp;attributes=attributes||{};if(attributes.isElement){return domNode?attributes.dom:attributes}else if('nodeType'in attributes){return domNode?attributes:Ext.get(attributes)}if(typeof attributes==='string'){return DOC.createTextNode(attributes)}tag=attributes.tag;if(!tag){tag='div'}if(attributes.namespace){element=DOC.createElementNS(attributes.namespace,tag)}else{element=DOC.createElement(tag)}elementStyle=element.style;for(name in attributes){if(name!=='tag'){value=attributes[name];switch(name){case CREATE_ATTRIBUTES.style:if(typeof value==='string'){element.setAttribute(name,value)}else{for(i in value){if(value.hasOwnProperty(i)){elementStyle[i]=value[i]}}}break;case CREATE_ATTRIBUTES.className:case CREATE_ATTRIBUTES.cls:tmp=value.split(spacesRe);classes=classes?classes.concat(tmp):tmp;break;case CREATE_ATTRIBUTES.classList:classes=classes?classes.concat(value):value;break;case CREATE_ATTRIBUTES.text:element.textContent=value;break;case CREATE_ATTRIBUTES.html:element.innerHTML=value;break;case CREATE_ATTRIBUTES.hidden:if(classes){classes.push(displayCls)}else{classes=[displayCls]}break;case CREATE_ATTRIBUTES.children:if(value!=null){for(i=0,ln=value.length;i<ln;i+=1){element.appendChild(me.create(value[i],true))}}break;default:if(value!=null){element.setAttribute(name,value)}}}}if(classes){element.className=classes.join(' ')}if(domNode){return element}else{return me.get(element)}},detach:function(){var dom=this.dom;if(dom&&dom.parentNode&&dom.tagName!=='BODY'){dom.parentNode.removeChild(dom)}return this},fly:function(dom,named){return Ext.fly(dom,named)},fromPoint:(function(){var elementFromPointBug;if(Ext.isIE){try{elementFromPointBug=window.self!==window.top}catch(e){elementFromPointBug=true}}return function(x,y,asDom){var el=null;el=DOC.elementFromPoint(x,y);if(!el&&elementFromPointBug){el=DOC.elementFromPoint(x,y)}return asDom?el:Ext.get(el)}})(),fromPagePoint:function(x,y,asDom){var scroll=Ext.getDoc().getScroll();return Element.fromPoint(x-scroll.left,y-scroll.top,asDom)},get:function(el){var me=this,cache=Ext.cache,nodeType,dom,id,entry,isDoc,isWin,isValidNodeType;if(!el){return null}function warnDuplicate(id){Ext.raise("DOM element with id "+id+" in Element cache is not the same as element in the DOM. Make sure to clean up Element instances using destroy()")}if(el.isFly){el=el.dom}if(typeof el==='string'){id=el;if(cache.hasOwnProperty(id)){entry=cache[id];if(entry.skipGarbageCollection||!Ext.isGarbage(entry.dom)){dom=Ext.getElementById?Ext.getElementById(id):DOC.getElementById(id);if(dom&&(dom!==entry.dom)){warnDuplicate(id)}return entry}else{entry.destroy()}}if(id===windowId){return Element.get(WIN)}else if(id===documentId){return Element.get(DOC)}dom=Ext.getElementById?Ext.getElementById(id):DOC.getElementById(id);if(dom){return new Element(dom)}}nodeType=el.nodeType;if(nodeType){isDoc=(nodeType===9);isValidNodeType=me.validNodeTypes[nodeType]}else{isWin=(el.window==el)}if(isValidNodeType||isWin){id=el.id;if(cache.hasOwnProperty(id)){entry=cache[id];if(entry.skipGarbageCollection||el===entry.dom||!Ext.isGarbage(entry.dom)){if(el!==entry.dom){warnDuplicate(id)}return entry}else{entry.destroy()}}if(el===DOC){el.id=documentId}if(el==WIN){el.id=windowId}el=new Element(el);if(isWin||isDoc){el.skipGarbageCollection=true}return el}if(el.isElement){return el}if(el.isComposite){return el}if(Ext.isIterable(el)){return me.select(el)}return null},getActiveElement:function(asElement){var active=DOC.activeElement;if(!active||!active.focus){active=DOC.body}return asElement?Ext.get(active):active},getDocumentHeight:function(){return Math.max(!Ext.isStrict?DOC.body.scrollHeight:docEl.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?DOC.body.scrollWidth:docEl.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(WIN.orientation==0)?'portrait':'landscape'}return(WIN.innerHeight>WIN.innerWidth)?'portrait':'landscape'},getViewportHeight:function(){var viewportHeight=Element._viewportHeight;if(Ext.isIE9m){return DOC.documentElement.clientHeight}return(viewportHeight!=null)?viewportHeight:docEl.clientHeight},getViewportWidth:function(){var viewportWidth=Element._viewportWidth;if(Ext.isIE9m){return DOC.documentElement.clientWidth}return(viewportWidth!=null)?viewportWidth:docEl.clientWidth},getViewportScale:function(){var top=WIN.top;return((Ext.isiOS||Ext.isAndroid)?1:(top.devicePixelRatio||top.screen.deviceXDPI/top.screen.logicalXDPI))*this.getViewportTouchScale()},getViewportTouchScale:function(forceRead){var scale=1,hidden='hidden',top=WIN.top,cachedScale;if(!forceRead){cachedScale=this._viewportTouchScale;if(cachedScale){return cachedScale}}if(Ext.isIE10p||Ext.isEdge||Ext.isiOS){scale=docEl.offsetWidth/WIN.innerWidth}else if(Ext.isChromeMobile){scale=top.outerWidth/top.innerWidth}return scale},getViewSize:function(){return{width:Element.getViewportWidth(),height:Element.getViewportHeight()}},maskIframes:function(){var iframes=document.getElementsByTagName('iframe');Ext.each(iframes,function(iframe){var myMask;myMask=Ext.fly(iframe.parentNode).mask();myMask.setStyle('background-color','transparent')})},normalize:function(prop){return propertyCache[prop]||(propertyCache[prop]=prop.replace(camelRe,camelReplaceFn))},_onWindowFocusChange:function(e){if(Ext.fly(e.target).is(Element.editableSelector)){lastFocusChange=new Date();editableHasFocus=(e.type==='focusin'||e.type==='pointerup')}},_onWindowResize:function(){var documentWidth=docEl.clientWidth,documentHeight=docEl.clientHeight,now=new Date(),threshold=1000,deltaX,deltaY;deltaX=documentWidth-Element._documentWidth;deltaY=documentHeight-Element._documentHeight;Element._windowWidth=documentWidth;Element._windowHeight=documentHeight;if(((now-lastFocusChange)<threshold)||((now-lastKeyboardClose)<threshold)){if(deltaX===0&&(editableHasFocus&&(deltaY<= -Element.minKeyboardHeight))){isVirtualKeyboardOpen=true;return}}if(isVirtualKeyboardOpen&&(deltaX===0)&&(deltaY>=Element.minKeyboardHeight)){isVirtualKeyboardOpen=false;lastKeyboardClose=new Date()}if(isVirtualKeyboardOpen){return}Element._viewportWidth=documentWidth;Element._viewportHeight=documentHeight},parseBox:function(box){box=box||0;var type=typeof box,parts,ln;if(type==='number'){return{top:box,right:box,bottom:box,left:box}}else if(type!=='string'){return box}parts=box.split(' ');ln=parts.length;if(ln===1){parts[1]=parts[2]=parts[3]=parts[0]}else if(ln===2){parts[2]=parts[0];parts[3]=parts[1]}else if(ln===3){parts[3]=parts[1]}return{top:parseFloat(parts[0])||0,right:parseFloat(parts[1])||0,bottom:parseFloat(parts[2])||0,left:parseFloat(parts[3])||0}},parseStyles:function(styles){var out={},matches;if(styles){cssRe.lastIndex=0;while((matches=cssRe.exec(styles))){out[matches[1]]=matches[2]||''}}return out},select:function(selector,composite,root){return Ext.fly(root||DOC).select(selector,composite)},query:function(selector,asDom,root){return Ext.fly(root||DOC).query(selector,asDom)},unitizeBox:function(box,units){var me=this;box=me.parseBox(box);return me.addUnits(box.top,units)+' '+me.addUnits(box.right,units)+' '+me.addUnits(box.bottom,units)+' '+me.addUnits(box.left,units)},unmaskIframes:function(){var iframes=document.getElementsByTagName('iframe');Ext.each(iframes,function(iframe){Ext.fly(iframe.parentNode).unmask()})},serializeForm:function(form){var fElements=form.elements||(DOC.forms[form]||Ext.getDom(form)).elements,hasSubmit=false,encoder=encodeURIComponent,data='',eLen=fElements.length,element,name,type,options,hasValue,e,o,oLen,opt;for(e=0;e<eLen;e+=1){element=fElements[e];name=element.name;type=element.type;options=element.options;if(!element.disabled&&name){if(/select-(one|multiple)/i.test(type)){oLen=options.length;for(o=0;o<oLen;o+=1){opt=options[o];if(opt.selected){hasValue=opt.hasAttribute('value');data+=Ext.String.format('{0}={1}&',encoder(name),encoder(hasValue?opt.value:opt.text))}}}else if(!(/file|undefined|reset|button/i.test(type))){if(!(/radio|checkbox/i.test(type)&&!element.checked)&&!(type=='submit'&&hasSubmit)){data+=encoder(name)+'='+encoder(element.value)+'&';hasSubmit=/submit/i.test(type)}}}}return data.substr(0,data.length-1)},getCommonAncestor:function(nodeA,nodeB,returnDom){caFly=caFly||new Ext.dom.Fly();caFly.attach(Ext.getDom(nodeA));while(!caFly.isAncestor(nodeB)){if(caFly.dom.parentNode){caFly.attach(caFly.dom.parentNode )}else{caFly.attach(DOC.body);break}}return returnDom?caFly.dom:Ext.get(caFly)}},addCls:function(names,prefix,suffix){var me=this,elementData=me.getData(),hasNewCls,dom,map,classList,i,ln,name;if(!names){return me}if(!elementData.isSynchronized){me.synchronize()}dom=me.dom;map=elementData.classMap;classList=elementData.classList;prefix=prefix?prefix+SEPARATOR:'';suffix=suffix?SEPARATOR+suffix:'';if(typeof names==='string'){names=names.split(spacesRe)}for(i=0,ln=names.length;i<ln;i+=1){name=names[i];if(name){name=prefix+name+suffix;if(!map[name]){map[name]=true;classList.push(name);hasNewCls=true}}}if(hasNewCls){dom.className=classList.join(' ')}return me},addClsOnClick:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.on("mousedown",function(){if(hasTest&&testFn.call(scope||me,me)===false){return false}Ext.fly(dom).addCls(className);var d=Ext.getDoc(),fn=function(){Ext.fly(dom).removeCls(className);d.removeListener("mouseup",fn)};d.on("mouseup",fn)});return me},addClsOnFocus:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.on("focus",function(){if(hasTest&&testFn.call(scope||me,me)===false){return false}Ext.fly(dom).addCls(className)});me.on("blur",function(){Ext.fly(dom).removeCls(className)});return me},addClsOnOver:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);me.hover(function(){if(hasTest&&testFn.call(scope||me,me)===false){return}Ext.fly(dom).addCls(className)},function(){Ext.fly(dom).removeCls(className)});return me},addStyles:function(sides,styles){var totalSize=0,sidesArr=(sides||'').match(wordsRe),i,len=sidesArr.length,side,styleSides=[];if(len===1){totalSize=Math.abs(parseFloat(this.getStyle(styles[sidesArr[0]]))||0)}else if(len){for(i=0;i<len;i+=1){side=sidesArr[i];styleSides.push(styles[side])}styleSides=this.getStyle(styleSides);for(i=0;i<len;i+=1){side=sidesArr[i];totalSize+=parseFloat(styleSides[styles[side]])||0}}return totalSize},addUnits:function(size,units){return Element.addUnits(size,units)},adjustDirect2DDimension:function(dimension){var me=this,dom=me.dom,display=me.getStyle('display'),inlineDisplay=dom.style.display,inlinePosition=dom.style.position,originIndex=dimension===WIDTH?0:1,currentStyle=dom.currentStyle,floating;if(display==='inline'){dom.style.display='inline-block'}dom.style.position=display.match(adjustDirect2DTableRe)?'absolute':'static';floating=(parseFloat(currentStyle[dimension])||parseFloat(currentStyle.msTransformOrigin.split(' ')[originIndex])*2)%1;dom.style.position=inlinePosition;if(display==='inline'){dom.style.display=inlineDisplay}return floating},animate:function(animation){animation=new Ext.fx.Animation(animation);animation.setElement(this);this._activeAnimation=animation;animation.on({animationend:this._onAnimationEnd,scope:this});Ext.Animator.run(animation);return animation},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(el,returnDom){var me=this,insertEl,eLen,e;if(el.nodeType||el.dom||typeof el==='string'){el=Ext.getDom(el);me.dom.appendChild(el);return!returnDom?Ext.get(el):el}else if(el.length){insertEl=Ext.fly(DOC.createDocumentFragment());eLen=el.length;for(e=0;e<eLen;e+=1){insertEl.appendChild(el[e],returnDom)}el=Ext.Array.toArray(insertEl.dom.childNodes);me.dom.appendChild(insertEl.dom);return returnDom?el:new Ext.dom.CompositeElementLite(el)}else{return me.createChild(el,null,returnDom)}},appendTo:function(el){Ext.getDom(el).appendChild(this.dom);return this},applyStyles:function(styles){if(styles){if(typeof styles==="function"){styles=styles.call()}if(typeof styles==="string"){styles=Element.parseStyles(styles)}if(typeof styles==="object"){this.setStyle(styles)}}return this},blur:function(){var me=this,dom=me.dom;if(dom!==DOC.body){try{dom.blur()}catch(e){}return me}else{return me.focus(undefined,dom)}},cacheScrollValues:function(){var me=this,scrollValues=[],scrolledDescendants=[],descendants,descendant,i,len;scrollFly=scrollFly||new Ext.dom.Fly();descendants=me.query('*');for(i=0,len=descendants.length;i<len;i+=1){descendant=descendants[i];if(descendant.scrollTop>0||descendant.scrollLeft!==0){scrolledDescendants.push(descendant);scrollValues.push(scrollFly.attach(descendant).getScroll())}}return function(){var scroll,i,len;for(i=0,len=scrolledDescendants.length;i<len;i+=1){scroll=scrollValues[i];scrollFly.attach(scrolledDescendants[i]);scrollFly.setScrollLeft(scroll.left);scrollFly.setScrollTop(scroll.top)}}},center:function(centerIn){return this.alignTo(centerIn||DOC,'c-c')},child:function(selector,returnDom){var me=this,id=Ext.get(me).id;return me.selectNode(Ext.makeIdSelector(id)+" > "+selector,!!returnDom)},clone:function(deep,returnDom){var clone=this.dom.cloneNode(deep);if(Ext.supports.CloneNodeCopiesExpando){clearData(clone,deep)}return returnDom?clone:Ext.get(clone)},constrainScrollLeft:function(left){var dom=this.dom;return Math.max(Math.min(left,dom.scrollWidth-dom.clientWidth),0)},constrainScrollTop:function(top){var dom=this.dom;return Math.max(Math.min(top,dom.scrollHeight-dom.clientHeight),0)},createChild:function(config,insertBefore,returnDom){config=config||{tag:'div'};if(insertBefore){return Ext.DomHelper.insertBefore(insertBefore,config,returnDom!==true)}else{return Ext.DomHelper.append(this.dom,config,returnDom!==true)}},contains:function(element){if(!element){return false}var me=this,dom=Ext.getDom(element);return(dom===me.dom)||me.isAncestor(dom)},destroy:function(){var me=this,dom=me.dom;if(me.destroyed){Ext.Logger.warn("Cannot destroy Element \""+me.id+"\". Already destroyed.");return}if(dom){if(dom===DOC.body){Ext.raise("Cannot destroy body element.")}else if(dom===DOC){Ext.raise("Cannot destroy document object.")}else if(dom===WIN){Ext.raise("Cannot destroy window object")}}if(dom&&dom.parentNode){dom.parentNode.removeChild(dom)}me.collect()},detach:function(){var dom=this.dom;if(dom&&dom.parentNode&&dom.tagName!=='BODY'){dom.parentNode.removeChild(dom)}return this},disableShadow:function(){var shadow=this.shadow;if(shadow){shadow.hide();shadow.disabled=true}},disableShim:function(){var shim=this.shim;if(shim){shim.hide();shim.disabled=true}},doReplaceWith:function(element){var dom=this.dom;dom.parentNode.replaceChild(Ext.getDom(element),dom)},doScrollIntoView:function(container,hscroll,animate,highlight,getScrollX,scrollTo){scrollFly=scrollFly||new Ext.dom.Fly();var me=this,dom=me.dom,scrollX=scrollFly.attach(container)[getScrollX](),scrollY=container.scrollTop,position=me.getScrollIntoViewXY(container,scrollX,scrollY),newScrollX=position.x,newScrollY=position.y;if(highlight){if(animate){animate=Ext.apply({listeners:{afteranimate:function(){scrollFly.attach(dom).highlight()}}},animate)}else{scrollFly.attach(dom).highlight()}}if(newScrollY!==scrollY){scrollFly.attach(container).scrollTo('top',newScrollY,animate)}if(hscroll!==false&&(newScrollX!==scrollX)){scrollFly.attach(container)[scrollTo]('left',newScrollX,animate)}return me},down:function(selector,returnDom){return this.selectNode(selector,!!returnDom)},enableShadow:function(options,isVisible){var me=this,shadow=me.shadow||(me.shadow=new Ext.dom.Shadow(Ext.apply({target:me},options))),shim=me.shim;if(shim){shim.offsets=shadow.outerOffsets;shim.shadow=shadow;shadow.shim=shim}if(isVisible===true||(isVisible!==false&&me.isVisible())){shadow.show()}else{shadow.hide()}shadow.disabled=false},enableShim:function(options,isVisible){var me=this,shim=me.shim||(me.shim=new Ext.dom.Shim(Ext.apply({target:me},options))),shadow=me.shadow;if(shadow){shim.offsets=shadow.outerOffsets;shim.shadow=shadow;shadow.shim=shim}if(isVisible===true||(isVisible!==false&&me.isVisible())){shim.show()}else{shim.hide()}shim.disabled=false;return shim},findParent:function(simpleSelector,limit,returnEl){var me=this,target=me.dom,topmost=docEl,depth=0;if(limit||limit===0){if(typeof limit!=='number'){topmost=Ext.getDom(limit);limit=Number.MAX_VALUE}}else{limit=50}while(target&&target.nodeType===1&&depth<limit&&target!==topmost){if(Ext.fly(target).is(simpleSelector)){return returnEl?Ext.get(target):target}depth+=1;target=target.parentNode}return null},findParentNode:function(simpleSelector,limit,returnEl){var p=Ext.fly(this.dom.parentNode);return p?p.findParent(simpleSelector,limit,returnEl):null},first:function(selector,returnDom){return this.matchNode('nextSibling','firstChild',selector,returnDom)},focus:function(defer,dom){var me=this;dom=dom||me.dom;if(Number(defer)){Ext.defer(me.focus,defer,me,[null,dom])}else{Ext.GlobalEvents.fireEvent('beforefocus',dom);dom.focus()}return me},collect:function(){var me=this,dom=me.dom,shadow=me.shadow,shim=me.shim;if(!me.isFly){me.mixins.observable.destroy.call(me);delete Ext.cache[me.id];me.el=null}if(dom){dom._extData=me.dom=null}if(shadow){shadow.hide();me.shadow=null}if(shim){shim.hide();me.shim=null}},getAnchorToXY:function(el,anchor,local,mySize){return el.getAnchorXY(anchor,local,mySize)},getAttribute:function(name,namespace){var dom=this.dom;return namespace?(dom.getAttributeNS(namespace,name)||dom.getAttribute(namespace+":"+name)):(dom.getAttribute(name)||dom[name]||null)},getAttributes:function(){var attributes=this.dom.attributes,result={},attr,i,len;for(i=0,len=attributes.length;i<len;i+=1){attr=attributes[i];result[attr.name]=attr.value}return result},getBottom:function(local){return(local?this.getLocalY():this.getY())+this.getHeight()},getById:function(id,asDom){var dom=DOC.getElementById(id)||this.dom.querySelector(Ext.makeIdSelector(id));return asDom?dom:(dom?Ext.get(dom):null)},getBorderPadding:function(){var paddingWidth=this.getStyle(paddingsTLRB),bordersWidth=this.getStyle(bordersTLRB);return{beforeX:(parseFloat(bordersWidth[borders.l])||0)+(parseFloat(paddingWidth[paddings.l])||0),afterX:(parseFloat(bordersWidth[borders.r])||0)+(parseFloat(paddingWidth[paddings.r])||0),beforeY:(parseFloat(bordersWidth[borders.t])||0)+(parseFloat(paddingWidth[paddings.t])||0),afterY:(parseFloat(bordersWidth[borders.b])||0)+(parseFloat(paddingWidth[paddings.b])||0)}},getBorders:function(){var bordersWidth=this.getStyle(bordersTLRB);return{beforeX:(parseFloat(bordersWidth[borders.l])||0),afterX:(parseFloat(bordersWidth[borders.r])||0),beforeY:(parseFloat(bordersWidth[borders.t])||0),afterY:(parseFloat(bordersWidth[borders.b])||0)}},getBorderWidth:function(side){return this.addStyles(side,borders)},getData:function(preventCreate){var dom=this.dom,data;if(dom){data=dom._extData;if(!data&&!preventCreate){dom._extData=data={}}}return data},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(contentHeight,preciseHeight){var me=this,dom=me.dom,hidden=me.isStyle('display','none'),height,floating;if(hidden){return 0}if(dom.nodeName==='BODY'){height=Element.getViewportHeight()}else{height=dom.offsetHeight;if(height==null){height=dom.getBoundingClientRect().height}}if(Ext.supports.Direct2DBug){floating=me.adjustDirect2DDimension(HEIGHT);if(preciseHeight){height+=floating}else if(floating>0&&floating<0.5){height+=1}}if(contentHeight){height-=me.getBorderWidth("tb")+me.getPadding("tb")}return(height<0)?0:height},getHtml:function(){return this.dom?this.dom.innerHTML:''},getLeft:function(local){return local?this.getLocalX():this.getX()},getLocalX:function(){var me=this,offsetParent,x=me.getStyle('left');if(!x||x==='auto'){x=0}else if(pxRe.test(x)){x=parseFloat(x)}else{x=me.getX();offsetParent=me.dom.offsetParent;if(offsetParent){x-=Ext.fly(offsetParent).getX()}}return x},getLocalXY:function(){var me=this,offsetParent,style=me.getStyle(['left','top']),x=style.left,y=style.top;if(!x||x==='auto'){x=0}else if(pxRe.test(x)){x=parseFloat(x)}else{x=me.getX();offsetParent=me.dom.offsetParent;if(offsetParent){x-=Ext.fly(offsetParent).getX()}}if(!y||y==='auto'){y=0}else if(pxRe.test(y)){y=parseFloat(y)}else{y=me.getY();offsetParent=me.dom.offsetParent;if(offsetParent){y-=Ext.fly(offsetParent).getY()}}return[x,y]},getLocalY:function(){var me=this,offsetParent,y=me.getStyle('top');if(!y||y==='auto'){y=0}else if(pxRe.test(y)){y=parseFloat(y)}else{y=me.getY();offsetParent=me.dom.offsetParent;if(offsetParent){y-=Ext.fly(offsetParent).getY()}}return y},getMargin:(function(){var hash={t:"top",l:"left",r:"right",b:"bottom"},allMargins=['margin-top','margin-left','margin-right','margin-bottom'];return function(side){var me=this,style,key,o;if(!side){style=me.getStyle(allMargins);o={};if(style&&typeof style==='object'){o={};for(key in margins){o[key]=o[hash[key]]=parseFloat(style[margins[key]])||0}}}else{o=me.addStyles(side,margins)}return o}})(),getPadding:function(side){return this.addStyles(side,paddings)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(local){return(local?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var me=this,dom=me.dom,docElement=docEl,left,top,body=DOC.body;if(dom===DOC||dom===body){left=docElement.scrollLeft||(body?body.scrollLeft:0);top=docElement.scrollTop||(body?body.scrollTop:0)}else{left=dom.scrollLeft;top=dom.scrollTop}return{left:left,top:top}},getScrollIntoViewXY:function(container,scrollX,scrollY){var dom=this.dom,ct=Ext.getDom(container),offsets=this.getOffsetsTo(ct),width=dom.offsetWidth,height=dom.offsetHeight,left=offsets[0]+scrollX,top=offsets[1]+scrollY,bottom=top+height,right=left+width,viewHeight=ct.clientHeight,viewWidth=ct.clientWidth,viewLeft=scrollX,viewTop=scrollY,viewBottom=viewTop+viewHeight,viewRight=viewLeft+viewWidth;if(height>viewHeight||top<viewTop){scrollY=top}else if(bottom>viewBottom){scrollY=bottom-viewHeight}if(width>viewWidth||left<viewLeft){scrollX=left}else if(right>viewRight){scrollX=right-viewWidth}return{x:scrollX,y:scrollY}},getScrollLeft:function(){var dom=this.dom;if(dom===DOC||dom===DOC.body){return this.getScroll().left}else{return dom.scrollLeft}},getScrollTop:function(){var dom=this.dom;if(dom===DOC||dom===DOC.body){return this.getScroll().top}else{return dom.scrollTop}},getSize:function(contentSize){return{width:this.getWidth(contentSize),height:this.getHeight(contentSize)}},getStyle:function(property,inline){var me=this,dom=me.dom,multiple=typeof property!=='string',hooks=me.styleHooks,prop=property,props=prop,len=1,domStyle,camel,values,hook,out,style,i;if(multiple){values={};prop=props[0];i=0;if(!(len=props.length)){return values}}if(!dom||dom.documentElement){return values||''}domStyle=dom.style;if(inline){style=domStyle}else{style=dom.ownerDocument.defaultView.getComputedStyle(dom,null);if(!style){inline=true;style=domStyle}}do{hook=hooks[prop];if(!hook){hooks[prop]=hook={name:Element.normalize(prop)}}if(hook.get){out=hook.get(dom,me,inline,style)}else{camel=hook.name;out=style[camel]}if(!multiple){return out}values[prop]=out;prop=props[i+=1]}while(i<len);return values},getStyleValue:function(name){return this.dom.style.getPropertyValue(name)},getTop:function(local){return local?this.getLocalY():this.getY()},getTouchAction:function(){return Ext.dom.TouchAction.get(this.dom)},getValue:function(asNumber){var value=this.dom.value;return asNumber?parseInt(value,10):value},getViewSize:function(){var dom=this.dom;if(dom===DOC||dom===DOC.body){return{width:Element.getViewportWidth(),height:Element.getViewportHeight()}}else{return{width:dom.clientWidth,height:dom.clientHeight}}},getVisibilityMode:function(){var me=this,data=me.getData(),mode=data.visibilityMode;if(mode===undefined){data.visibilityMode=mode=Element.DISPLAY}return mode},getWidth:function(contentWidth,preciseWidth){var me=this,dom=me.dom,hidden=me.isStyle('display','none'),rect,width,floating;if(hidden){return 0}if(Ext.supports.BoundingClientRect){rect=dom.getBoundingClientRect();width=(me.vertical&&!Ext.supports.RotatedBoundingClientRect)?(rect.bottom-rect.top):(rect.right-rect.left);width=preciseWidth?width:Math.ceil(width)}else{width=dom.offsetWidth}if(Ext.supports.Direct2DBug&&!me.vertical){floating=me.adjustDirect2DDimension(WIDTH);if(preciseWidth){width+=floating;}else if(floating>0&&floating<0.5){width+=1}}if(contentWidth){width-=me.getBorderWidth("lr")+me.getPadding("lr")}return(width<0)?0:width},getX:function(){return this.getXY()[0]},getXY:function(){var round=Math.round,dom=this.dom,body=DOC.body,x=0,y=0,bodyRect,rect;if(dom!==DOC&&dom!==body){try{bodyRect=body.getBoundingClientRect();rect=dom.getBoundingClientRect();x=rect.left-bodyRect.left;y=rect.top-bodyRect.top}catch(ex){}}return[round(x),round(y)]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle('z-index'),10)},hasCls:function(name){var elementData=this.getData();if(!elementData.isSynchronized){this.synchronize()}return elementData.classMap.hasOwnProperty(name)},hide:function(){this.setVisible(false);return this},insertAfter:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el.nextSibling);return this},insertBefore:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el);return this},insertFirst:function(el,returnDom){el=el||{};if(el.nodeType||el.dom||typeof el==='string'){el=Ext.getDom(el);this.dom.insertBefore(el,this.dom.firstChild);return!returnDom?Ext.get(el):el}else{return this.createChild(el,this.dom.firstChild,returnDom)}},insertHtml:function(where,html,returnEl){var el=Ext.DomHelper.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el},insertSibling:function(el,where,returnDom){var me=this,DomHelper=Ext.DomHelper,isAfter=(where||'before').toLowerCase()==='after',rt,insertEl,eLen,e;if(Ext.isIterable(el)){eLen=el.length;insertEl=Ext.fly(DOC.createDocumentFragment());if(Ext.isArray(el)){for(e=0;e<eLen;e+=1){rt=insertEl.appendChild(el[e],returnDom)}}else{for(e=0;e<eLen;e+=1){insertEl.dom.appendChild(rt=el[0])}if(returnDom===false){rt=Ext.get(rt)}}me.dom.parentNode.insertBefore(insertEl.dom,isAfter?me.dom.nextSibling:me.dom);return rt}el=el||{};if(el.nodeType||el.dom){rt=me.dom.parentNode.insertBefore(Ext.getDom(el),isAfter?me.dom.nextSibling:me.dom);if(!returnDom){rt=Ext.get(rt)}}else{if(isAfter&&!me.dom.nextSibling){rt=DomHelper.append(me.dom.parentNode,el,!returnDom)}else{rt=DomHelper[isAfter?'insertAfter':'insertBefore'](me.dom,el,!returnDom)}}return rt},is:function(selector){var dom=this.dom,is;if(!selector){is=true}else if(!dom.tagName){is=false}else if(Ext.isFunction(selector)){is=selector(dom)}else{is=dom[Ext.supports.matchesSelector](selector)}return is},isAncestor:function(el){var ret=false,dom=this.dom,child=Ext.getDom(el);if(dom&&child){if(dom.contains){return dom.contains(child)}else if(dom.compareDocumentPosition){return!!(dom.compareDocumentPosition(child)&16)}else{while((child=child.parentNode)){ret=child===dom||ret}}}return ret},isPainted:(function(){return!Ext.browser.is.IE?function(){var dom=this.dom;return Boolean(dom&&dom.offsetParent)}:function(){var dom=this.dom;return Boolean(dom&&(dom.offsetHeight!==0&&dom.offsetWidth!==0))}})(),isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},isStyle:function(style,val){return this.getStyle(style)===val},isVisible:function(deep){var dom=this.dom,end;if(!dom){return false}if(!visFly){visFly=new Ext.dom.Fly()}for(end=dom.ownerDocument.documentElement;dom!==end;dom=dom.parentNode){if(!dom||dom.nodeType===11||(visFly.attach(dom)).isStyle(VISIBILITY,HIDDEN)||visFly.isStyle(DISPLAY,NONE)){return false}if(!deep){break}}return true},last:function(selector,returnDom){return this.matchNode('previousSibling','lastChild',selector,returnDom)},matchNode:function(dir,start,selector,returnDom){var dom=this.dom,n;if(!dom){return null}n=dom[start];while(n){if(n.nodeType===1&&(!selector||Ext.fly(n,'_matchNode').is(selector))){return!returnDom?Ext.get(n):n}n=n[dir]}return null},monitorMouseLeave:function(delay,handler,scope){var me=this,timer,listeners={mouseleave:function(e){if(Ext.isIE9m){e.enableIEAsync()}timer=Ext.defer(handler,delay,scope||me,[e])},mouseenter:function(){clearTimeout(timer)},destroy:function(){clearTimeout(timer);me.un(listeners)}};me.on(listeners);return listeners},next:function(selector,returnDom){return this.matchNode('nextSibling','nextSibling',selector,returnDom)},parent:function(selector,returnDom){return this.matchNode('parentNode','parentNode',selector,returnDom)},position:function(pos,zIndex,x,y){var me=this;if(me.dom.tagName!=='BODY'){if(!pos&&me.isStyle(POSITION,STATIC)){me.setStyle(POSITION,RELATIVE)}else if(pos){me.setStyle(POSITION,pos)}if(zIndex){me.setStyle(ZINDEX,zIndex)}if(x||y){me.setXY([x||false,y||false])}}},prev:function(selector,returnDom){return this.matchNode('previousSibling','previousSibling',selector,returnDom)},query:function(selector,asDom,single){var dom=this.dom,results,len,nlen,node,nodes,i,j;if(!dom){return null}asDom=(asDom!==false);selector=selector.split(",");if(!single){results=[]}for(i=0,len=selector.length;i<len;i+=1){if(typeof selector[i]==='string'){if(single){node=dom.querySelector(selector[i]);return asDom?node:Ext.get(node)}nodes=dom.querySelectorAll(selector[i]);for(j=0,nlen=nodes.length;j<nlen;j+=1){results.push(asDom?nodes[j]:Ext.get(nodes[j]))}}}return results},radioCls:function(className){var cn=this.dom.parentNode.childNodes,v;className=Ext.isArray(className)?className:[className];for(var i=0,len=cn.length;i<len;i+=1){v=cn[i];if(v&&v.nodeType===1){Ext.fly(v).removeCls(className)}}return this.addCls(className)},redraw:function(){var dom=this.dom,domStyle=dom.style;domStyle.display='none';dom.offsetHeight;domStyle.display=''},remove:function(){this.destroy()},removeChild:function(element){this.dom.removeChild(Ext.getDom(element));return this},removeCls:function(names,prefix,suffix){var me=this,elementData=me.getData(),hasNewCls,dom,map,classList,i,ln,name;if(!names){return me}if(!elementData.isSynchronized){me.synchronize()}dom=me.dom;map=elementData.classMap;classList=elementData.classList;prefix=prefix?prefix+SEPARATOR:'';suffix=suffix?SEPARATOR+suffix:'';if(typeof names==='string'){names=names.split(spacesRe)}for(i=0,ln=names.length;i<ln;i+=1){name=names[i];if(name){name=prefix+name+suffix;if(map[name]){delete map[name];Ext.Array.remove(classList,name);hasNewCls=true}}}if(hasNewCls){dom.className=classList.join(' ')}return me},repaint:function(){var me=this;me.addCls(Ext.baseCSSPrefix+'repaint');Ext.defer(function(){if(me.dom){Ext.fly(me.dom).removeCls(Ext.baseCSSPrefix+'repaint')}},1);return me},replace:function(el,destroy){el=Ext.getDom(el);var parentNode=el.parentNode,id=el.id,dom=this.dom;if(!parentNode){Ext.raise('Cannot replace element "'+id+'". It is not attached to a parent node.')}if(destroy!==false&&id&&Ext.cache[id]){parentNode.insertBefore(dom,el);Ext.get(el).destroy()}else{parentNode.replaceChild(dom,el)}return this},replaceCls:function(oldName,newName,prefix,suffix){var me=this,dom,map,classList,i,ln,name,elementData=me.getData(),change;if(!oldName&&!newName){return me}oldName=oldName||[];newName=newName||[];if(!elementData.isSynchronized){me.synchronize()}if(!suffix){suffix=''}dom=me.dom;map=elementData.classMap;classList=elementData.classList;prefix=prefix?prefix+SEPARATOR:'';suffix=suffix?SEPARATOR+suffix:'';if(typeof oldName==='string'){oldName=oldName.split(spacesRe)}if(typeof newName==='string'){newName=newName.split(spacesRe)}for(i=0,ln=oldName.length;i<ln;i+=1){name=prefix+oldName[i]+suffix;if(map[name]){delete map[name];change=true}}for(i=0,ln=newName.length;i<ln;i+=1){name=prefix+newName[i]+suffix;if(!map[name]){map[name]=true;change=true}}if(change){elementData.classList=classList=Ext.Object.getKeys(map);dom.className=classList.join(' ')}return me},replaceWith:function(el){var me=this,dom=me.dom,parent=dom.parentNode,cache=Ext.cache,newDom;me.clearListeners();if(el.nodeType||el.dom||typeof el==='string'){el=Ext.get(el);newDom=parent.insertBefore(el.dom,dom)}else{newDom=Ext.DomHelper.insertBefore(dom,el)}parent.removeChild(dom);me.dom=newDom;if(!me.isFly){delete cache[me.id];cache[me.id=Ext.id(newDom)]=me}return me},resolveListenerScope:function(defaultScope){var component=this.component;return component?component.resolveListenerScope(defaultScope):this},scroll:function(direction,distance,animate){if(!this.isScrollable()){return false}direction=direction.charAt(0);var me=this,dom=me.dom,side=direction==='r'||direction==='l'?'left':'top',scrolled=false,currentScroll,constrainedScroll;if(direction==='l'||direction==='t'||direction==='u'){distance= -distance}if(side==='left'){currentScroll=dom.scrollLeft;constrainedScroll=me.constrainScrollLeft(currentScroll+distance)}else{currentScroll=dom.scrollTop;constrainedScroll=me.constrainScrollTop(currentScroll+distance)}if(constrainedScroll!==currentScroll){this.scrollTo(side,constrainedScroll,animate);scrolled=true}return scrolled},scrollBy:function(deltaX,deltaY,animate){var me=this,dom=me.dom;if(deltaX.length){animate=deltaY;deltaY=deltaX[1];deltaX=deltaX[0]}else if(typeof deltaX!='number'){animate=deltaY;deltaY=deltaX.y;deltaX=deltaX.x}if(deltaX){me.scrollTo('left',me.constrainScrollLeft(dom.scrollLeft+deltaX),animate)}if(deltaY){me.scrollTo('top',me.constrainScrollTop(dom.scrollTop+deltaY),animate)}return me},scrollChildIntoView:function(child,hscroll){Ext.fly(child).scrollIntoView(this,hscroll)},scrollIntoView:function(container,hscroll,animate,highlight){container=Ext.getDom(container)||Ext.getBody().dom;return this.doScrollIntoView(container,hscroll,animate,highlight,'getScrollLeft','scrollTo')},scrollTo:function(side,value,animate){var top=topRe.test(side),me=this,prop=top?'scrollTop':'scrollLeft',dom=me.dom,animCfg;if(!animate||!me.anim){dom[prop]=value;dom[prop]=value}else{animCfg={to:{}};animCfg.to[prop]=value;if(Ext.isObject(animate)){Ext.applyIf(animCfg,animate)}me.animate(animCfg)}return me},select:function(selector,composite){var isElementArray,elements;if(typeof selector==="string"){elements=this.query(selector,!composite )}else if(selector.length===undefined){Ext.raise("Invalid selector specified: "+selector )}else{elements=selector;isElementArray=true}return composite?new Ext.CompositeElement(elements,!isElementArray):new Ext.CompositeElementLite(elements,true)},selectNode:function(selector,asDom){return this.query(selector,asDom,true)},set:function(attributes,useSet){var me=this,dom=me.dom,attribute,value;for(attribute in attributes){if(attributes.hasOwnProperty(attribute)){value=attributes[attribute];if(attribute==='style'){me.applyStyles(value)}else if(attribute==='cls'){dom.className=value}else if(useSet!==false){if(value===undefined){dom.removeAttribute(attribute)}else{dom.setAttribute(attribute,value)}}else{dom[attribute]=value}}}return me},setBottom:function(bottom){this.dom.style[BOTTOM]=Element.addUnits(bottom);return this},setCls:function(className){var me=this,elementData=me.getData(),i,ln,name,map,classList;if(!elementData.isSynchronized){me.synchronize()}if(typeof className==='string'){className=className.split(spacesRe)}elementData.classList=classList=className.slice();elementData.classMap=map={};for(i=0,ln=classList.length;i<ln;i+=1){map[classList[i]]=true}me.dom.className=classList.join(' ')},setDisplayed:function(value){var me=this;if(typeof value==="boolean"){value=value?me._getDisplay():NONE}me.setStyle(DISPLAY,value);if(me.shadow||me.shim){me.setUnderlaysVisible(value!==NONE)}return me},setHeight:function(height){var me=this;me.dom.style[HEIGHT]=Element.addUnits(height);if(me.shadow||me.shim){me.syncUnderlays()}return me},setHtml:function(html){if(this.dom){this.dom.innerHTML=html}return this},setId:function(id){var me=this,currentId=me.id,cache=Ext.cache;if(currentId){delete cache[currentId]}me.dom.id=id;me.id=id;cache[id]=me;return me},setLeft:function(left){var me=this;me.dom.style[LEFT]=Element.addUnits(left);if(me.shadow||me.shim){me.syncUnderlays()}return me},setLocalX:function(x){var me=this,style=me.dom.style;style.right='auto';style.left=(x===null)?'auto':x+'px';if(me.shadow||me.shim){me.syncUnderlays()}return me},setLocalXY:function(x,y){var me=this,style=me.dom.style;style.right='auto';if(x&&x.length){y=x[1];x=x[0]}if(x===null){style.left='auto'}else if(x!==undefined){style.left=x+'px'}if(y===null){style.top='auto'}else if(y!==undefined){style.top=y+'px'}if(me.shadow||me.shim){me.syncUnderlays()}return me},setLocalY:function(y){var me=this;me.dom.style.top=(y===null)?'auto':y+'px';if(me.shadow||me.shim){me.syncUnderlays()}return me},setMargin:function(margin){var me=this,domStyle=me.dom.style;if(margin||margin===0){margin=me.self.unitizeBox((margin===true)?5:margin);domStyle.setProperty('margin',margin,'important')}else{domStyle.removeProperty('margin-top');domStyle.removeProperty('margin-right');domStyle.removeProperty('margin-bottom');domStyle.removeProperty('margin-left')}},setMaxHeight:function(height){this.dom.style[MAX_HEIGHT]=Element.addUnits(height);return this},setMaxWidth:function(width){this.dom.style[MAX_WIDTH]=Element.addUnits(width);return this},setMinHeight:function(height){this.dom.style[MIN_HEIGHT]=Element.addUnits(height);return this},setMinWidth:function(width){this.dom.style[MIN_WIDTH]=Element.addUnits(width);return this},setOpacity:function(opacity){var me=this;if(me.dom){me.setStyle('opacity',opacity)}return me},setPadding:function(padding){var me=this,domStyle=me.dom.style;if(padding||padding===0){padding=me.self.unitizeBox((padding===true)?5:padding);domStyle.setProperty('padding',padding,'important')}else{domStyle.removeProperty('padding-top');domStyle.removeProperty('padding-right');domStyle.removeProperty('padding-bottom');domStyle.removeProperty('padding-left')}},setRight:function(right){this.dom.style[RIGHT]=Element.addUnits(right);return this},setScrollLeft:function(left){this.dom.scrollLeft=left;return this},setScrollTop:function(top){this.dom.scrollTop=top;return this},setSize:function(width,height){var me=this,style=me.dom.style;if(Ext.isObject(width)){height=width.height;width=width.width}style.width=Element.addUnits(width);style.height=Element.addUnits(height);if(me.shadow||me.shim){me.syncUnderlays()}return me},setSizeState:function(state){var me=this,add,remove;if(state===true){add=sizedCls;remove=[unsizedCls,stretchedCls]}else if(state===false){add=unsizedCls;remove=[sizedCls,stretchedCls]}else if(state===null){add=stretchedCls;remove=[sizedCls,unsizedCls]}else{remove=[sizedCls,unsizedCls,stretchedCls]}if(add){me.addCls(add)}me.removeCls(remove);return me},setStyle:function(prop,value){var me=this,dom=me.dom,hooks=me.styleHooks,style=dom.style,name=prop,hook;if(typeof name==='string'){hook=hooks[name];if(!hook){hooks[name]=hook={name:Element.normalize(name)}}value=(value==null)?'':value;if(hook.set){hook.set(dom,value,me)}else{style[hook.name]=value}if(hook.afterSet){hook.afterSet(dom,value,me)}}else{for(name in prop){if(prop.hasOwnProperty(name)){hook=hooks[name];if(!hook){hooks[name]=hook={name:Element.normalize(name)}}value=prop[name];value=(value==null)?'':value;if(hook.set){hook.set(dom,value,me)}else{style[hook.name]=value}if(hook.afterSet){hook.afterSet(dom,value,me)}}}}return me},setText:function(text){this.dom.textContent=text},setTop:function(top){var me=this;me.dom.style[TOP]=Element.addUnits(top);if(me.shadow||me.shim){me.syncUnderlays()}return me},setTouchAction:function(touchAction){Ext.dom.TouchAction.set(this.dom,touchAction)},setUnderlaysVisible:function(visible){var shadow=this.shadow,shim=this.shim;if(shadow&&!shadow.disabled){if(visible){shadow.show()}else{shadow.hide()}}if(shim&&!shim.disabled){if(visible){shim.show()}else{shim.hide()}}},setVisibility:function(isVisible){var domStyle=this.dom.style;if(isVisible){domStyle.removeProperty('visibility')}else{domStyle.setProperty('visibility','hidden','important')}},setVisibilityMode:function(mode){if(mode!==1&&mode!==2&&mode!==3&&mode!==4){Ext.raise("visibilityMode must be one of the following: Ext.Element.DISPLAY, Ext.Element.VISIBILITY, Ext.Element.OFFSETS, or Ext.Element.CLIP")}this.getData().visibilityMode=mode;return this},setVisible:function(visible){var me=this,mode=me.getVisibilityMode(),addOrRemove=visible?'removeCls':'addCls';switch(mode){case Element.DISPLAY:me.removeCls([visibilityCls,offsetsCls,clipCls]);me[addOrRemove](displayCls);break;case Element.VISIBILITY:me.removeCls([displayCls,offsetsCls,clipCls]);me[addOrRemove](visibilityCls);break;case Element.OFFSETS:me.removeCls([visibilityCls,displayCls,clipCls]);me[addOrRemove](offsetsCls);break;case Element.CLIP:me.removeCls([visibilityCls,displayCls,offsetsCls]);me[addOrRemove](clipCls);break}if(me.shadow||me.shim){me.setUnderlaysVisible(visible)}return me},setWidth:function(width){var me=this;me.dom.style[WIDTH]=Element.addUnits(width);if(me.shadow||me.shim){me.syncUnderlays()}return me},setX:function(x){return this.setXY([x,false])},setXY:function(xy){var me=this,pts=me.translatePoints(xy),style=me.dom.style,pos;me.position();style.right='auto';for(pos in pts){if(!isNaN(pts[pos])){style[pos]=pts[pos]+'px'}}if(me.shadow||me.shim){me.syncUnderlays()}return me},setY:function(y){return this.setXY([false,y])},setZIndex:function(zindex){var me=this;if(me.shadow){me.shadow.setZIndex(zindex)}if(me.shim){me.shim.setZIndex(zindex)}return me.setStyle('z-index',zindex)},show:function(){this.setVisible(true);return this},swapCls:function(firstClass,secondClass,flag,prefix){if(flag===undefined){flag=true}var me=this,addedClass=flag?firstClass:secondClass,removedClass=flag?secondClass:firstClass;if(removedClass){me.removeCls(prefix?prefix+'-'+removedClass:removedClass)}if(addedClass){me.addCls(prefix?prefix+'-'+addedClass:addedClass)}return me},synchronize:function(){var me=this,dom=me.dom,hasClassMap={},className=dom.className,classList,i,ln,name,elementData=me.getData();if(className&&className.length>0){classList=dom.className.split(classNameSplitRegex);for(i=0,ln=classList.length;i<ln;i+=1){name=classList[i];hasClassMap[name]=true}}else{classList=[]}elementData.classList=classList;elementData.classMap=hasClassMap;elementData.isSynchronized=true;return me},syncUnderlays:function(){var me=this,shadow=me.shadow,shim=me.shim,dom=me.dom,xy,x,y,w,h;if(me.isVisible()){xy=me.getXY();x=xy[0];y=xy[1];w=dom.offsetWidth;h=dom.offsetHeight;if(shadow&&!shadow.hidden){shadow.realign(x,y,w,h)}if(shim&&!shim.hidden){shim.realign(x,y,w,h)}}},toggleCls:function(className,state){if(typeof state!=='boolean'){state=!this.hasCls(className)}return state?this.addCls(className):this.removeCls(className)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var transformStyleName='webkitTransform'in DOC.createElement('div').style?'webkitTransform':'transform';return function(x,y,z){x=Math.round(x);y=Math.round(y);z=Math.round(z);this.dom.style[transformStyleName]='translate3d('+(x||0)+'px, '+(y||0)+'px, '+(z||0)+'px)'}}(),unwrap:function(){var dom=this.dom,parentNode=dom.parentNode,grandparentNode,activeElement=Ext.fly(Ext.Element.getActiveElement()),cached,resumeFocus,grannyFly,tabIndex;cached=Ext.cache[activeElement.id];if(cached){activeElement=cached}if(this.contains(activeElement)){if(cached){cached.suspendFocusEvents()}resumeFocus=true}if(parentNode){grandparentNode=parentNode.parentNode;if(resumeFocus){tabIndex=grandparentNode.getAttribute('tabIndex');grannyFly=Ext.fly(grandparentNode);grannyFly.set({tabIndex:-1});grannyFly.suspendFocusEvents();grannyFly.focus()}grandparentNode.insertBefore(dom,parentNode);grandparentNode.removeChild(parentNode)}else{grandparentNode=DOC.createDocumentFragment();grandparentNode.appendChild(dom)}if(resumeFocus){if(cached){cached.focus();cached.resumeFocusEvents()}else{Ext.fly(activeElement).focus()}if(grannyFly){grannyFly.resumeFocusEvents();grannyFly.set({tabIndex:tabIndex})}}return this},up:function(simpleSelector,limit,returnDom){return this.findParentNode(simpleSelector,limit,!returnDom)},update:function(html){return this.setHtml(html)},wrap:function(config,returnDom,selector){var me=this,dom=me.dom,newEl=Ext.DomHelper.insertBefore(dom,config||{tag:"div"},!returnDom),target=newEl,activeElement=Ext.Element.getActiveElement(),cached,resumeFocus,tabIndex;cached=Ext.cache[activeElement.id];if(cached){activeElement=cached}if(selector){target=newEl.selectNode(selector,returnDom)}if(me.contains(activeElement)){if(cached){cached.suspendFocusEvents()}tabIndex=newEl.dom.getAttribute('tabIndex');newEl.set({tabIndex:-1});newEl.suspendFocusEvents();newEl.focus();resumeFocus=true}target.appendChild(dom);if(resumeFocus){if(cached){cached.focus();cached.resumeFocusEvents()}else{Ext.fly(activeElement).focus()}newEl.resumeFocusEvents();newEl.set({tabIndex:tabIndex})}return newEl},privates:{doAddListener:function(eventName,fn,scope,options,order,caller,manager){var me=this,gesturePublisher=Ext.$gesturePublisher,originalName=eventName,supports=Ext.supports,supportsTouch=supports.TouchEvents,supportsPointer=supports.PointerEvents,observableDoAddListener,additiveEventName,translatedEventName;eventName=Ext.canonicalEventName(eventName);if(!me.blockedEvents[eventName]){observableDoAddListener=me.mixins.observable.doAddListener;options=options||{};if(Element.useDelegatedEvents===false){options.delegated=options.delegated||false}if(options.translate!==false){additiveEventName=me.additiveEvents[eventName];if(additiveEventName){options.type=eventName;eventName=additiveEventName;observableDoAddListener.call(me,eventName,fn,scope,options,order,caller,manager)}translatedEventName=me.eventMap[eventName];if(translatedEventName){options.type=options.type||eventName;if(manager){options.managedName=originalName}eventName=translatedEventName}}if(observableDoAddListener.call(me,eventName,fn,scope,options,order,caller,manager)){if(me.longpressEvents[eventName]&&(++me.longpressListenerCount===1)){me.on('MSHoldVisual','preventMsHoldVisual',me)}}if(manager&&translatedEventName){delete options.managedName}delete options.type}},doRemoveListener:function(eventName,fn,scope){var me=this,gesturePublisher=Ext.$gesturePublisher,supports=Ext.supports,supportsTouch=supports.TouchEvents,supportsPointer=supports.PointerEvents,observableDoRemoveListener,translatedEventName,additiveEventName,contextMenuListenerRemover,removed;eventName=Ext.canonicalEventName(eventName);if(!me.blockedEvents[eventName]){observableDoRemoveListener=me.mixins.observable.doRemoveListener;additiveEventName=me.additiveEvents[eventName];if(additiveEventName){eventName=additiveEventName;observableDoRemoveListener.call(me,eventName,fn,scope)}translatedEventName=me.eventMap[eventName];if(translatedEventName){removed=observableDoRemoveListener.call(me,translatedEventName,fn,scope)}removed=observableDoRemoveListener.call(me,eventName,fn,scope)||removed;if(removed){if(me.longpressEvents[eventName]&&! --me.longpressListenerCount){me.un('MSHoldVisual','preventMsHoldVisual',me)}}}},_initEvent:function(eventName){return(this.events[eventName]=new Ext.dom.ElementEvent(this,eventName))},_getDisplay:function(){var data=this.getData(),display=data[ORIGINALDISPLAY];if(display===undefined){data[ORIGINALDISPLAY]=display=''}return display},_getPublisher:function(eventName){var Publisher=Ext.event.publisher.Publisher,publisher=Publisher.publishersByEvent[eventName];if(!publisher||(this.dom===window&&eventName==='resize')){publisher=Publisher.publishers.dom}return publisher},isFocusSuspended:function(){return!!this.getData().suspendFocusEvents},preventMsHoldVisual:function(e){e.preventDefault()},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent('focus','blur')}this.getData().suspendFocusEvents=true},resumeFocusEvents:function(){function resumeFn(){var data;if(!this.destroyed){data=this.getData();if(data){data.suspendFocusEvents=false}if(!this.isFly){this.resumeEvent('focus','blur')}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(resumeFn,this)}else{resumeFn.call(this)}}}},deprecated:{'5.0':{methods:{cssTranslate:null,getHTML:'getHtml',getOuterHeight:null,getOuterWidth:null,getPageBox:function(getRegion){var me=this,dom=me.dom,isDoc=dom.nodeName==='BODY',w=isDoc?Element.getViewportWidth():dom.offsetWidth,h=isDoc?Element.getViewportHeight():dom.offsetHeight,xy=me.getXY(),t=xy[1],r=xy[0]+w,b=xy[1]+h,l=xy[0];if(getRegion){return new Ext.util.Region(t,r,b,l)}else{return{left:l,top:t,width:w,height:h,right:r,bottom:b}}},getScrollParent:null,isDescendent:null,isTransparent:function(prop){var value=this.getStyle(prop);return value?transparentRe.test(value):false},purgeAllListeners:'clearListeners',removeAllListeners:'clearListeners',setHTML:'setHtml',setTopLeft:null}}}}},function(Element){var DOC=document,docEl=DOC.documentElement,prototype=Element.prototype,supports=Ext.supports,pointerdown='pointerdown',pointermove='pointermove',pointerup='pointerup',pointercancel='pointercancel',MSPointerDown='MSPointerDown',MSPointerMove='MSPointerMove',MSPointerUp='MSPointerUp',MSPointerCancel='MSPointerCancel',mousedown='mousedown',mousemove='mousemove',mouseup='mouseup',mouseover='mouseover',mouseout='mouseout',mouseenter='mouseenter',mouseleave='mouseleave',touchstart='touchstart',touchmove='touchmove',touchend='touchend',touchcancel='touchcancel',click='click',dblclick='dblclick',tap='tap',doubletap='doubletap',eventMap=prototype.eventMap={},additiveEvents=prototype.additiveEvents={},oldId=Ext.id,eventOptions;Ext.id=function(obj,prefix){var el=Ext.getDom(obj,true),sandboxPrefix,id;if(!el){id=oldId(obj,prefix)}else if(!(id=el.id)){id=oldId(null,prefix||Element.prototype.identifiablePrefix);if(Ext.isSandboxed){sandboxPrefix=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+'-');id=sandboxPrefix+id}el.id=id}return id};if(supports.PointerEvents){eventMap[mousedown]=pointerdown;eventMap[mousemove]=pointermove;eventMap[mouseup]=pointerup;eventMap[touchstart]=pointerdown;eventMap[touchmove]=pointermove;eventMap[touchend]=pointerup;eventMap[touchcancel]=pointercancel;eventMap[mouseover]='pointerover';eventMap[mouseout]='pointerout';eventMap[mouseenter]='pointerenter';if(!Ext.isIE11){eventMap[mouseleave]='pointerleave'}}else if(supports.MSPointerEvents){eventMap[pointerdown]=MSPointerDown;eventMap[pointermove]=MSPointerMove;eventMap[pointerup]=MSPointerUp;eventMap[pointercancel]=MSPointerCancel;eventMap[mousedown]=MSPointerDown;eventMap[mousemove]=MSPointerMove;eventMap[mouseup]=MSPointerUp;eventMap[touchstart]=MSPointerDown;eventMap[touchmove]=MSPointerMove;eventMap[touchend]=MSPointerUp;eventMap[touchcancel]=MSPointerCancel;eventMap[mouseover]='MSPointerOver';eventMap[mouseout]='MSPointerOut'}else if(supports.TouchEvents){eventMap[pointerdown]=touchstart;eventMap[pointermove]=touchmove;eventMap[pointerup]=touchend;eventMap[pointercancel]=touchcancel;eventMap[mousedown]=touchstart;eventMap[mousemove]=touchmove;eventMap[mouseup]=touchend;eventMap[click]=tap;eventMap[dblclick]=doubletap;if(Ext.isWebKit&&Ext.os.is.Desktop){eventMap[touchstart]=mousedown;eventMap[touchmove]=mousemove;eventMap[touchend]=mouseup;eventMap[touchcancel]=mouseup;additiveEvents[mousedown]=mousedown;additiveEvents[mousemove]=mousemove;additiveEvents[mouseup]=mouseup;additiveEvents[touchstart]=touchstart;additiveEvents[touchmove]=touchmove;additiveEvents[touchend]=touchend;additiveEvents[touchcancel]=touchcancel;additiveEvents[pointerdown]=mousedown;additiveEvents[pointermove]=mousemove;additiveEvents[pointerup]=mouseup;additiveEvents[pointercancel]=mouseup}}else{eventMap[pointerdown]=mousedown;eventMap[pointermove]=mousemove;eventMap[pointerup]=mouseup;eventMap[pointercancel]=mouseup;eventMap[touchstart]=mousedown;eventMap[touchmove]=mousemove;eventMap[touchend]=mouseup;eventMap[touchcancel]=mouseup}if(Ext.isWebKit){eventMap.transitionend=Ext.browser.getVendorProperyName('transitionEnd');eventMap.animationstart=Ext.browser.getVendorProperyName('animationStart');eventMap.animationend=Ext.browser.getVendorProperyName('animationEnd')}if(!Ext.supports.MouseWheel&&!Ext.isOpera){eventMap.mousewheel='DOMMouseScroll'}eventOptions=prototype.$eventOptions=Ext.Object.chain(prototype.$eventOptions);eventOptions.translate=eventOptions.capture=eventOptions.delegate=eventOptions.delegated=eventOptions.stopEvent=eventOptions.preventDefault=eventOptions.stopPropagation=eventOptions.element=1;prototype.styleHooks.opacity={name:'opacity',afterSet:function(dom,value,el){var shadow=el.shadow;if(shadow){shadow.setOpacity(value)}}};prototype.getTrueXY=prototype.getXY;Ext.select=Element.select;Ext.query=Element.query;Ext.apply(Ext,{get:function(element){return Element.get(element)},getDom:function(el){if(!el||!DOC){return null}return typeof el==='string'?Ext.getElementById(el):'dom'in el?el.dom:el},getBody:function(){if(!Ext._bodyEl){if(!DOC.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(DOC.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(DOC.head||DOC.getElementsByTagName('head')[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(DOC)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(node){node=node.dom||node;var id=node&&node.id,el=Ext.cache[id],parent;if(el){el.destroy()}else if(node&&(node.nodeType===3||node.tagName.toUpperCase()!=='BODY')){parent=node.parentNode;if(parent){parent.removeChild(node)}}}});Ext.isGarbage=function(dom){return dom&&dom.nodeType===1&&dom.tagName!=='BODY'&&dom.tagName!=='HTML'&&(!dom.parentNode||(dom.offsetParent===null&&((Ext.isIE8?DOC.all[dom.id]:DOC.getElementById(dom.id))!==dom)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(dom))))};if(Ext.os.is.Android||(Ext.os.is.Windows&&Ext.supports.Touch)){Ext.onReady(function(){var win=Ext.getWin();Element._documentWidth=Element._viewportWidth=docEl.clientWidth;Element._documentHeight=Element._viewportHeight=docEl.clientHeight;win.on({focusin:'_onWindowFocusChange',focusout:'_onWindowFocusChange',pointerup:'_onWindowFocusChange',capture:true,delegated:false,delay:1,scope:Element});win.on({resize:'_onWindowResize',priority:2000,scope:Element})})}});